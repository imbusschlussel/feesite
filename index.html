<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Finder's Fee</title>
    <link rel="icon" href="./favicon.ico" type="image/x-icon">
    <style>
      #cover-image {
        position: absolute;
        left: calc(50vw - 150px);
        top: calc(50vh - 150px);
        width: 300px;
        height: 300px;
      }

      body {
        width: 1000px;
        height: 1000px;
        overflow: hidden;
        position: relative;
      }
    </style>
  </head>
  <body>
    <img id="cover-image" src="cover.webp" alt="Album cover" onclick="play()" />
    <audio id="audio" src="./atf_tfop.mp3" />
    <script>
      function play() {
        const audioElement = document.querySelector("#audio")
        audioElement.play()
      }

      const body = document.querySelector('body')
      const image = document.querySelector('#cover-image')

      const width = body.getBoundingClientRect().x
      const height = body.getBoundingClientRect().y

      let FPS = 60

      let velocityX = 0.5
        , velocityY = 0.5
        , pause = true
        , previousColor = 0
      ;

      setInterval(() => {
        if (pause) return;

        let rect = image.getBoundingClientRect()

        let left = rect.x
        let top = rect.y

        if (left + rect.width >= width || left <= 0) {
          velocityX = -velocityX
        }
        if (top + rect.height >= height || top <= 0) {
          velocityY = -velocityY
        }

        image.style.left = rect.x + velocityX + 'px'
        image.style.top = rect.y + velocityY + 'px'
      }, 1000 / FPS)

      const reset = () => {
        // width =
        //   window.innerWidth ||
        //   document.documentElement.clientWidth ||
        //   document.body.clientWidth
        // ;

        // height =
        //   window.innerHeight ||
        //   document.documentElement.clientHeight ||
        //   document.body.clientHeight
        // ;

        pause =
          width <= image.getBoundingClientRect().width ||
          height <= image.getBoundingClientRect().height
        ;

        image.style.left = 'calc(50vw - 150px)'
        image.style.top = 'calc(50vh - 28px)'
      }

      reset()

      window.addEventListener('resize', reset, true)
    </script>
  </body>
</html>
